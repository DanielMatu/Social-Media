(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[0],{115:function(e,t,s){},116:function(e,t,s){},117:function(e,t,s){},118:function(e,t,s){},119:function(e,t,s){},120:function(e,t,s){},121:function(e,t,s){},122:function(e,t,s){},152:function(e,t,s){},153:function(e,t,s){},154:function(e,t,s){},155:function(e,t,s){},156:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),n=s(73),r=s.n(n),i=(s(85),s(170)),o=s(171),l=s(172),j=s(173),u=s(15),d=s(4),b=s(35),p=s(24),m=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:t.payload};case"FOLLOW":return Object(p.a)(Object(p.a)({},e),{},{user:Object(p.a)(Object(p.a)({},e.user),{},{followings:[].concat(Object(b.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(p.a)(Object(p.a)({},e),{},{user:Object(p.a)(Object(p.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},h=s(0),O={user:null,isFetching:!1,error:!1},x=Object(c.createContext)(O),f=function(e){var t=e.children,s=Object(c.useReducer)(m,O),a=Object(d.a)(s,2),n=a[0],r=a[1];return Object(h.jsx)(x.Provider,{value:{user:n.user,isFetching:n.isFetching,error:n.error,dispatch:r},children:t})};function g(){var e=Object(c.useContext)(x).user,t="http://localhost:8800/images/";return Object(h.jsxs)("div",{className:"topbarContainer",children:[Object(h.jsx)("div",{className:"topbarLeft",children:Object(h.jsx)(u.b,{to:"/",style:{textDecoration:"none"},children:Object(h.jsx)("span",{className:"logo",children:"Lamasocial"})})}),Object(h.jsx)("div",{className:"topbarCenter",children:Object(h.jsxs)("div",{className:"searchBar",children:[Object(h.jsx)(i.a,{className:"searchIcon"}),Object(h.jsx)("input",{placeholder:"Search for friends, posts, or videos",className:"searchInput"})]})}),Object(h.jsxs)("div",{className:"topbarRight",children:[Object(h.jsxs)("div",{className:"topbarLinks",children:[Object(h.jsx)("span",{className:"topbarLink",children:"Homepage"}),Object(h.jsx)("span",{className:"topbarLink",children:"Timeline"})]}),Object(h.jsxs)("div",{className:"topbarIcons",children:[Object(h.jsxs)("div",{className:"topbarIconItem",children:[Object(h.jsx)(o.a,{}),Object(h.jsx)("span",{className:"topbarIconBadge",children:"1"})]}),Object(h.jsxs)("div",{className:"topbarIconItem",children:[Object(h.jsx)(u.b,{to:"/messenger",children:Object(h.jsx)(l.a,{})}),Object(h.jsx)("span",{className:"topbarIconBadge",children:"2"})]}),Object(h.jsxs)("div",{className:"topbarIconItem",children:[Object(h.jsx)(j.a,{}),Object(h.jsx)("span",{className:"topbarIconBadge",children:"1"})]})]}),Object(h.jsx)(u.b,{to:"/profile/".concat(e.username),children:Object(h.jsx)("img",{src:e.profilePic?t+e.profilePic:t+"person/noAvatar.png",alt:"",className:"topbarImg"})})]})]})}s(94);var v=s(174),N=s(175),I=s(176),w=s(177),k=s(178),y=s(179),L=[{id:1,profilePicture:"person/1.jpeg",username:"Safak Kocaoglu"},{id:2,profilePicture:"person/2.jpeg",username:"Janell Shrum"},{id:3,profilePicture:"person/3.jpeg",username:"Alex Durden"},{id:4,profilePicture:"person/4.jpeg",username:"Dora Hawks"},{id:5,profilePicture:"person/5.jpeg",username:"Thomas Holden"},{id:6,profilePicture:"person/6.jpeg",username:"Shirley Beauchamp"},{id:7,profilePicture:"person/7.jpeg",username:"Travis Bennett"},{id:8,profilePicture:"person/8.jpeg",username:"Kristen Thomas"},{id:9,profilePicture:"person/9.jpeg",username:"Gary Duty"},{id:10,profilePicture:"person/10.jpeg",username:"Safak Kocaoglu"}];s(95);function C(e){var t=e.user;return Object(h.jsx)("div",{children:Object(h.jsxs)("li",{className:"sidebarFriend",children:[Object(h.jsx)("img",{className:"sidebarFriendImg",src:"http://localhost:8800/images/"+t.profilePicture,alt:""}),Object(h.jsx)("span",{className:"sidebarFriendName",children:t.username})]})})}function S(){return Object(h.jsx)("div",{className:"sidebar",children:Object(h.jsxs)("div",{className:"sidebarWrapper",children:[Object(h.jsxs)("ul",{className:"sidebarList",children:[Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(v.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Videos"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(N.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Groups"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(I.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Bookmarks"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(w.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Questions"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(k.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Jobs"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(y.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Events"})]})]}),Object(h.jsx)("button",{className:"sidebarButton",children:"Show More"}),Object(h.jsx)("hr",{className:"sidebarHr"}),Object(h.jsx)("ul",{className:"sidebarFriendList",children:L.map((function(e){return Object(h.jsx)(C,{user:e},e.id)}))})]})})}var F=s(3),_=s.n(F),P=s(5),T=(s(97),s(180)),B=s(181),R=s(182),U=s(183),E=s(184),A=s(79),D=s.n(A),W=(console.log("it was productoin"),D.a.create({baseURL:"https://dmatu-social-media.herokuapp.com/api/"}));function M(){var e=Object(c.useContext)(x).user,t="http://localhost:8800/images/",s=Object(c.useRef)(),a=Object(c.useState)(null),n=Object(d.a)(a,2),r=n[0],i=n[1],o=function(){var t=Object(P.a)(_.a.mark((function t(c){var a,n,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),a={userId:e._id,desc:s.current.value},!r){t.next=16;break}return n=new FormData,i=Date.now()+r.name,n.append("name",i),n.append("file",r),a.img=i,t.prev=8,t.next=11,W.post("/upload",n);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(8),console.log(t.t0);case 16:return t.prev=16,t.next=19,W.post("/posts",a);case 19:window.location.reload(),t.next=25;break;case 22:t.prev=22,t.t1=t.catch(16),console.log(t.t1);case 25:case"end":return t.stop()}}),t,null,[[8,13],[16,22]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"share",children:Object(h.jsxs)("div",{className:"shareWrapper",children:[Object(h.jsxs)("div",{className:"shareTop",children:[Object(h.jsx)("img",{className:"shareProfileImg",src:e.profilePic?t+e.profilePic:t+"person/noAvatar.png",alt:""}),Object(h.jsx)("input",{placeholder:"Whats on your mind "+e.username+"?",className:"shareInput",ref:s})]}),Object(h.jsx)("hr",{className:"shareHr"}),r&&Object(h.jsxs)("div",{className:"shareImgContainer",children:[Object(h.jsx)("img",{className:"shareImg",src:URL.createObjectURL(r),alt:""}),Object(h.jsx)(T.a,{className:"shareCancelImg",onClick:function(){return i(null)}})]}),Object(h.jsxs)("form",{className:"shareBottom",onSubmit:o,children:[Object(h.jsxs)("div",{className:"shareOptions",children:[Object(h.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(h.jsx)(B.a,{htmlColor:"tomato",className:"shareIcon"}),Object(h.jsx)("span",{className:"shareOptionText",children:"Photo or Video"}),Object(h.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return i(e.target.files[0])}})]}),Object(h.jsxs)("div",{className:"shareOption",children:[Object(h.jsx)(R.a,{htmlColor:"blue",className:"shareIcon"}),Object(h.jsx)("span",{className:"shareOptionText",children:"Tag"})]}),Object(h.jsxs)("div",{className:"shareOption",children:[Object(h.jsx)(U.a,{htmlColor:"green",className:"shareIcon"}),Object(h.jsx)("span",{className:"shareOptionText",children:"Location"})]}),Object(h.jsxs)("div",{className:"shareOption",children:[Object(h.jsx)(E.a,{htmlColor:"goldenrod",className:"shareIcon"}),Object(h.jsx)("span",{className:"shareOptionText",children:"Feelings"})]})]}),Object(h.jsx)("button",{className:"shareButton",type:"submit",children:"Share"})]})]})})}console.log("hers axios instance"),console.log(W);s(115);var G=s(185),V=s(42);function K(e){var t=e.post,s=Object(c.useState)(t.likes.length),a=Object(d.a)(s,2),n=a[0],r=a[1],i=Object(c.useState)(!1),o=Object(d.a)(i,2),l=o[0],j=o[1],u=Object(c.useState)({}),b=Object(d.a)(u,2),p=b[0],m=b[1],O="http://localhost:8800/images/",f=Object(c.useContext)(x).user;Object(c.useEffect)((function(){j(t.likes.includes(f._id))}),[f._id,t.likes]),Object(c.useEffect)((function(){(function(){var e=Object(P.a)(_.a.mark((function e(){var s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.get("/user?userId=".concat(t.userId));case 2:s=e.sent,m(s.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.userId]);var g=function(){try{W.put("/posts/"+t._id+"/like",{userId:f._id})}catch(e){}r(l?n-1:n+1),j(!l)};return Object(h.jsx)("div",{className:"post",children:Object(h.jsxs)("div",{className:"postWrapper",children:[Object(h.jsxs)("div",{className:"postTop",children:[Object(h.jsxs)("div",{className:"postTopLeft",children:[Object(h.jsx)("img",{className:"postProfileImg",src:p.profilePic?O+p.profilePic:O+"person/noAvatar.png",alt:""}),Object(h.jsx)("span",{className:"postUsername",children:p.username}),Object(h.jsx)("span",{className:"postDate",children:Object(V.a)(t.createdAt)})]}),Object(h.jsx)("div",{className:"postTopRight",children:Object(h.jsx)(G.a,{})})]}),Object(h.jsxs)("div",{className:"postCenter",children:[Object(h.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),Object(h.jsx)("img",{className:"postImg",src:O+t.img,alt:""})]}),Object(h.jsxs)("div",{className:"postBottom",children:[Object(h.jsxs)("div",{className:"postBottomLeft",children:[Object(h.jsx)("img",{className:"likeButton",src:"".concat(O,"like.png"),onClick:g,alt:""}),Object(h.jsx)("img",{className:"likeButton",src:"".concat(O,"heart.png"),onClick:g,alt:""}),Object(h.jsxs)("span",{className:"postLikeCounter",children:[n," people like it"]})]}),Object(h.jsx)("div",{className:"postBottomRight",children:Object(h.jsxs)("span",{className:"postCommentText",children:[t.comment," comments"]})})]})]})})}s(116);function q(e){var t=e.username,s=Object(c.useState)([]),a=Object(d.a)(s,2),n=a[0],r=a[1],i=Object(c.useContext)(x).user;return Object(c.useEffect)((function(){(function(){var e=Object(P.a)(_.a.mark((function e(){var s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,W.get("/posts/profile/"+t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,W.get("/posts/timeline/"+i._id);case 8:e.t0=e.sent;case 9:s=e.t0,r(s.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,i._id]),Object(h.jsx)("div",{className:"feed",children:Object(h.jsxs)("div",{className:"feedWrapper",children:[(!t||t===i.username)&&Object(h.jsx)(M,{}),n.map((function(e){return Object(h.jsx)(K,{post:e},e._id)}))]})})}s(117),s(118);function H(e){var t=e.user;return Object(h.jsxs)("li",{className:"rightbarFriend",children:[Object(h.jsxs)("div",{className:"rightbarProfileImgContainer",children:[Object(h.jsx)("img",{className:"rightbarProfileImg",src:"http://localhost:8800/images/"+t.profilePicture,alt:""}),Object(h.jsx)("span",{className:"rightbarOnline"})]}),Object(h.jsx)("span",{className:"rightbarUserName",children:t.username})]})}var J=s(186),z=s(187);function Q(e){var t=e.user,s="http://localhost:8800/images/",a=Object(c.useState)([]),n=Object(d.a)(a,2),r=n[0],i=n[1],o=Object(c.useContext)(x),l=o.user,j=o.dispatch,b=Object(c.useState)(l.followings.includes(null===t||void 0===t?void 0:t.id)),p=Object(d.a)(b,2),m=p[0],O=p[1];Object(c.useEffect)((function(){(function(){var e=Object(P.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.get("/user/friends/"+l._id);case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[l]);var f=function(){var e=Object(P.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!m){e.next=7;break}return e.next=4,W.put("/user/"+t._id+"/unfollow",{userId:l._id});case 4:j({type:"UNFOLLOW",payload:t._id}),e.next=10;break;case 7:return e.next=9,W.put("/user/"+t._id+"/follow",{userId:l._id});case 9:j({type:"FOLLOW",payload:t._id});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:O(!m);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),g=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"birthdayContainer",children:[Object(h.jsx)("img",{className:"birthdayImg",src:"assets/gift.png",alt:""}),Object(h.jsxs)("span",{className:"birthdayText",children:[" ",Object(h.jsx)("b",{children:"Pola Foster"})," and ",Object(h.jsx)("b",{children:"3 other friends"})," have a birthday today"]})]}),Object(h.jsx)("img",{className:"rightbarAd",src:"assets/ad.png",alt:""}),Object(h.jsx)("h4",{className:"rightbarTitle",children:"Online Friends"}),Object(h.jsx)("ul",{className:"rightbarFriendList",children:L.map((function(e){return Object(h.jsx)(H,{user:e},e.id)}))})]})},v=function(){return Object(h.jsxs)(h.Fragment,{children:[t.username!==l.username&&Object(h.jsxs)("button",{className:"rightbarFollowButton",onClick:f,children:[m?"Unfollow":"Follow",m?Object(h.jsx)(J.a,{}):Object(h.jsx)(z.a,{})]}),Object(h.jsx)("h4",{className:"rightbarTitle",children:"User Information "}),Object(h.jsxs)("div",{className:"rightbarInfo",children:[Object(h.jsxs)("div",{className:"rightbarInfoItem",children:[Object(h.jsx)("span",{className:"rightbarInfoKey",children:"City:"}),Object(h.jsx)("span",{className:"rightbarInfoValue",children:t.city})]}),Object(h.jsxs)("div",{className:"rightbarInfoItem",children:[Object(h.jsx)("span",{className:"rightbarInfoKey",children:"From:"}),Object(h.jsx)("span",{className:"rightbarInfoValue",children:t.from})]}),Object(h.jsxs)("div",{className:"rightbarInfoItem",children:[Object(h.jsx)("span",{className:"rightbarInfoKey",children:"Relationship:"}),Object(h.jsx)("span",{className:"rightbarInfoValue",children:1===t.relationship?"Single":2===t.relationship?"Married":"-"})]})]}),Object(h.jsx)("h4",{className:"rightbarTitle",children:"User friends"}),Object(h.jsx)("div",{className:"rightbarFollowings",children:r.map((function(e){return Object(h.jsx)(u.b,{to:"/profile/"+e.username,style:{textDecoration:"none"},children:Object(h.jsxs)("div",{className:"rightbarFollowing",children:[Object(h.jsx)("img",{src:e.profilePicture?s+e.profilePicture:s+"person/noAvatar.png",alt:"",className:"rightbarFollowingImg"}),Object(h.jsx)("span",{className:"rightbarFollowingName",children:e.username})]})},e._id)}))})]})};return Object(h.jsx)("div",{className:"rightbar",children:Object(h.jsx)("div",{className:"rightbarWrapper",children:t?Object(h.jsx)(v,{}):Object(h.jsx)(g,{})})})}s(119);function X(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g,{}),Object(h.jsxs)("div",{className:"homeContainer",children:[Object(h.jsx)(S,{}),Object(h.jsx)(q,{}),Object(h.jsx)(Q,{})]})]})}s(120);var Y=function(){var e=Object(P.a)(_.a.mark((function e(t,s){var c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"LOGIN_START"}),e.prev=1,e.next=4,W.post("/auth/login",t);case 4:c=e.sent,console.log("user credential"),console.log(t),console.log("the res from apicall"),console.log(c),s({type:"LOGIN_SUCCESS",payload:c.data}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),s({type:"LOGIN_FAILURE",payload:e.t0});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,s){return e.apply(this,arguments)}}(),Z=s(188);function $(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useContext)(x),a=(s.user,s.isFetching),n=(s.error,s.dispatch);return Object(h.jsx)("div",{className:"login",children:Object(h.jsxs)("div",{className:"loginWrapper",children:[Object(h.jsxs)("div",{className:"loginLeft",children:[Object(h.jsx)("h3",{className:"loginLogo",children:"Lamasocial"}),Object(h.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on Lamasocial"})]}),Object(h.jsx)("div",{className:"loginRight",children:Object(h.jsxs)("form",{className:"loginBox",onSubmit:function(s){s.preventDefault(),Y({email:e.current.value,password:t.current.value},n)},children:[Object(h.jsx)("input",{placeholder:"Email",type:"email",className:"loginInput",ref:e}),Object(h.jsx)("input",{required:!0,placeholder:"Password",type:"password",minLength:"6",className:"loginInput",ref:t}),Object(h.jsx)("button",{className:"loginButton",disabled:a,children:a?Object(h.jsx)(Z.a,{color:"white",size:"20px"}):"Log in"}),Object(h.jsx)("span",{className:"loginForgot",children:"Forgot password?"}),Object(h.jsx)("button",{className:"loginRegisterButton",disabled:a,children:a?Object(h.jsx)(Z.a,{color:"white",size:"20px"}):"Create a New Account"})]})})]})})}s(121);var ee=s(6);function te(){var e="http://localhost:8800/images/",t=Object(c.useState)({}),s=Object(d.a)(t,2),a=s[0],n=s[1],r=Object(ee.h)().username;return Object(c.useEffect)((function(){(function(){var e=Object(P.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.get("/user?username=".concat(r));case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]),Object(h.jsx)("div",{children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g,{}),Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)(S,{}),Object(h.jsxs)("div",{className:"profileRight",children:[Object(h.jsxs)("div",{className:"profileRightTop",children:[Object(h.jsxs)("div",{className:"profileCover",children:[Object(h.jsx)("img",{className:"profileCoverImg",src:a.coverPicture?e+a.coverPicture:e+"/person/noCover.png",alt:""}),Object(h.jsx)("img",{className:"profileUserImg",src:a.profilePic?e+a.profilePic:e+"/person/noAvatar.png",alt:""})]}),Object(h.jsxs)("div",{className:"profileInfo",children:[Object(h.jsx)("h4",{className:"profileInfoName",children:a.username}),Object(h.jsx)("span",{className:"profileInfoDesc",children:a.desc})]})]}),Object(h.jsxs)("div",{className:"profileRightBottom",children:[Object(h.jsx)(q,{username:r}),Object(h.jsx)(Q,{user:a})]})]})]})]})})}s(122);var se=s(47);function ce(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useRef)(),a=Object(c.useRef)(),n=Object(ee.g)(),r=function(){var c=Object(P.a)(_.a.mark((function c(r){var i;return _.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(r.preventDefault(),a.current.value===s.current.value){c.next=5;break}a.current.setCustomValidity("Passwords don't match!"),c.next=15;break;case 5:return i={username:e.current.value,email:t.current.value,password:s.current.value},c.prev=6,c.next=9,W.post("/auth/register",i);case 9:n.push("/login"),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(6),console.log(c.t0);case 15:case"end":return c.stop()}}),c,null,[[6,12]])})));return function(e){return c.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"login",children:Object(h.jsxs)("div",{className:"loginWrapper",children:[Object(h.jsxs)("div",{className:"loginLeft",children:[Object(h.jsx)("h3",{className:"loginLogo",children:"Lamasocial"}),Object(h.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on Lamasocial"})]}),Object(h.jsx)("div",{className:"loginRight",children:Object(h.jsxs)("form",{className:"loginBox",onSubmit:r,children:[Object(h.jsx)("input",{placeholder:"Username",required:!0,ref:e,className:"loginInput"}),Object(h.jsx)("input",{placeholder:"Email",type:"email",required:!0,ref:t,className:"loginInput"}),Object(h.jsx)("input",{placeholder:"Password",type:"password",required:!0,minLength:"6",ref:s,className:"loginInput"}),Object(h.jsx)("input",{placeholder:"Password Again",type:"password",required:!0,ref:a,className:"loginInput"}),Object(h.jsx)("button",{className:"loginButton",children:"Sign Up"}),Object(h.jsx)(u.b,{to:"/login",className:"loginRegisterLink",children:Object(h.jsx)("button",{type:"submit",className:"loginRegisterButton",children:"Log into Account"})})]})})]})})}s(152),s(153);function ae(e){var t=e.conversation,s=e.currentUser,a=Object(c.useState)({}),n=Object(d.a)(a,2),r=n[0],i=n[1],o="http://localhost:8800/images/";return Object(c.useEffect)((function(){var e=t.members.find((function(e){return e!==s._id}));(function(){var t=Object(P.a)(_.a.mark((function t(){var s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W("/user?userId="+e);case 3:s=t.sent,i(s.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[s,t]),Object(h.jsxs)("div",{className:"conversation",children:[Object(h.jsx)("img",{className:"conversationImg",src:r.profilePic?o+r.profilePic:o+"person/noAvatar.png",alt:""}),Object(h.jsx)("span",{className:"conversationName",children:r.username})]})}s(154);function ne(e){var t=e.message,s=e.own;return Object(h.jsxs)("div",{className:s?"message own":"message",children:[Object(h.jsxs)("div",{className:"messageTop",children:[Object(h.jsx)("img",{className:"messageImg",src:"https://images.pexels.com/photos/7537863/pexels-photo-7537863.jpeg?auto=compress&cs=tinysrgb&h=650&w=940",alt:""}),Object(h.jsx)("p",{className:"messageText",children:t.text})]}),Object(h.jsx)("div",{className:"messageBottom",children:Object(V.a)(t.createdAt)})]})}s(155);function re(e){var t=e.onlineUsers,s=e.currentId,a=e.setCurrentChat,n=Object(c.useState)([]),r=Object(d.a)(n,2),i=r[0],o=r[1],l=Object(c.useState)([]),j=Object(d.a)(l,2),u=j[0],b=j[1],p="http://localhost:8800/images/";Object(c.useEffect)((function(){(function(){var e=Object(P.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.get("/user/friends/"+s);case 2:t=e.sent,o(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(c.useEffect)((function(){console.log("heres friends"),console.log(i),b(i.filter((function(e){return t.includes(e._id)})))}),[i,t]);var m=function(){var e=Object(P.a)(_.a.mark((function e(t){var c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("current id"),console.log(s),console.log("friend id"),console.log(t._id),e.next=7,W.get("/conversations/find/".concat(s,"/").concat(t._id));case 7:c=e.sent,a(c.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"chatOnline",children:u.map((function(e){return Object(h.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){return m(e)},children:[Object(h.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(h.jsx)("img",{className:"chatOnlineImg",src:(null===e||void 0===e?void 0:e.profilePic)?p+e.profilePic:p+"person/noAvatar.png",alt:""}),Object(h.jsx)("div",{className:"chatOnlineBadge"})]}),Object(h.jsx)("div",{className:"chatOnlineName",children:e.username})]})}))})}function ie(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(null),r=Object(d.a)(n,2),i=r[0],o=r[1],l=Object(c.useState)([]),j=Object(d.a)(l,2),u=j[0],p=j[1],m=Object(c.useState)(""),O=Object(d.a)(m,2),f=O[0],v=O[1],N=Object(c.useState)(null),I=Object(d.a)(N,2),w=I[0],k=I[1],y=Object(c.useState)([]),L=Object(d.a)(y,2),C=L[0],S=L[1],F=Object(c.useRef)(),T=Object(c.useContext)(x).user,B=Object(c.useRef)();Object(c.useEffect)((function(){F.current=Object(se.io)("wss://dmatu-social-media.herokuapp.com"),F.current.on("connect",(function(){console.log("connected")})),F.current.on("time",(function(e){console.log("lmaoz timestringgg from messgng"),console.log(e)}));setTimeout((function(){console.log("heres socket current"),console.log(F.current.connected)}),5e3),F.current.on("getMessage",(function(e){k({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(c.useEffect)((function(){w&&(null===i||void 0===i?void 0:i.members.includes(w.sender))&&p((function(e){return[].concat(Object(b.a)(e),[w])}))}),[w,i]),Object(c.useEffect)((function(){F.current.emit("addUser",T._id),F.current.on("getUsers",(function(e){S(T.followings.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[T]),Object(c.useEffect)((function(){(function(){var e=Object(P.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.get("/conversations/"+T._id);case 3:t=e.sent,a(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[T._id]),Object(c.useEffect)((function(){(function(){var e=Object(P.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.get("/messages/"+(null===i||void 0===i?void 0:i._id));case 3:t=e.sent,p(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[i]);var R=function(){var e=Object(P.a)(_.a.mark((function e(t){var s,c,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={sender:T._id,text:f,conversationId:i._id},c=i.members.find((function(e){return e!==T._id})),F.current.emit("sendMessage",{senderId:T._id,receiverId:c,text:f}),e.prev=4,e.next=7,W.post("/messages",s);case 7:a=e.sent,p([].concat(Object(b.a)(u),[a.data])),v(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e;null===(e=B.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[u]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g,{}),Object(h.jsxs)("div",{className:"messenger",children:[Object(h.jsx)("div",{className:"chatMenu",children:Object(h.jsxs)("div",{className:"chatMenuWrapper",children:[Object(h.jsx)("input",{placeholder:"Search for friends",className:"chatMenuInput"}),s.map((function(e){return Object(h.jsx)("div",{onClick:function(){return o(e)},children:Object(h.jsx)(ae,{conversation:e,currentUser:T},e._id)},e._id)}))]})}),Object(h.jsx)("div",{className:"chatBox",children:Object(h.jsx)("div",{className:"chatBoxWrapper",children:i?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"chatBoxTop",children:u.map((function(e){return Object(h.jsx)("div",{ref:B,children:Object(h.jsx)(ne,{message:e,own:e.sender===T._id},e._id)},e._id)}))}),Object(h.jsxs)("div",{className:"chatBoxBottom",children:[Object(h.jsx)("textarea",{className:"chatMessageInput",placeholder:"write something...",onChange:function(e){return v(e.target.value)},value:f}),Object(h.jsx)("button",{className:"chatSubmitButton",onClick:R,children:"Send"})]})]}):Object(h.jsx)("span",{className:"noConversationText",children:"Open a conversation to start a chat."})})}),Object(h.jsx)("div",{className:"chatOnline",children:Object(h.jsx)("div",{className:"chatOnlineWrapper",children:Object(h.jsx)(re,{onlineUsers:C,currentId:T._id,setCurrentChat:o})})})]})]})}var oe=function(){var e=Object(c.useContext)(x).user;return Object(h.jsx)(u.a,{children:Object(h.jsxs)(ee.d,{children:[Object(h.jsx)(ee.b,{exact:!0,path:"/",children:e?Object(h.jsx)(X,{}):Object(h.jsx)(ce,{})}),Object(h.jsx)(ee.b,{path:"/login",children:e?Object(h.jsx)(ee.a,{to:"/"}):Object(h.jsx)($,{})}),Object(h.jsx)(ee.b,{path:"/register",children:e?Object(h.jsx)(ee.a,{to:"/"}):Object(h.jsx)(ce,{})}),Object(h.jsx)(ee.b,{path:"/messenger",children:e?Object(h.jsx)(ie,{}):Object(h.jsx)(ee.a,{to:"/"})}),Object(h.jsx)(ee.b,{path:"/profile/:username",children:Object(h.jsx)(te,{})})]})})};r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(f,{children:Object(h.jsx)(oe,{})})}),document.getElementById("root"))},85:function(e,t,s){},94:function(e,t,s){},95:function(e,t,s){},97:function(e,t,s){}},[[156,1,2]]]);
//# sourceMappingURL=main.beef2380.chunk.js.map