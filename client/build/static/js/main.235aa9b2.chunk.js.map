{"version":3,"sources":["context/AuthReducer.js","context/AuthContext.js","config.js","components/topbar/Topbar.jsx","dummyData.js","components/closeFriends/CloseFriend.jsx","components/sidebar/Sidebar.jsx","components/share/Share.jsx","components/comment/Comment.jsx","components/commentPreview/CommentPreview.jsx","components/post/Post.jsx","components/feed/Feed.jsx","components/online/Online.jsx","components/rightbar/Rightbar.jsx","pages/home/Home.jsx","apiCalls.js","pages/login/Login.jsx","pages/profile/Profile.jsx","pages/register/Register.jsx","components/conversations/Conversation.jsx","components/message/Message.jsx","components/chatOnline/ChatOnline.jsx","pages/messenger/Messenger.jsx","components/result/Result.jsx","components/results/Results.jsx","pages/search/Search.jsx","App.js","index.js"],"names":["AuthReducer","state","action","type","user","isFetching","error","payload","followings","filter","following","INITIAL_STATE","AuthContext","createContext","AuthContextProvider","children","useReducer","dispatch","Provider","value","axiosInstance","console","log","axios","create","baseURL","Topbar","useContext","PF","process","searchbarText","useRef","searchbarTextMobile","history","useHistory","search","e","a","mobile","preventDefault","get","allUsers","filteredUsers","searchbarTextValue","current","data","map","u","username","split","some","name","includes","push","pathname","className","to","style","textDecoration","onSubmit","Search","ref","placeholder","Person","Chat","Notifications","src","profilePic","alt","onClick","Users","id","profilePicture","CloseFriend","Sidebar","PlayCircleFilled","Group","Bookmark","HelpOutline","Work","Event","Share","desc","useState","file","setFile","submitHandler","newPost","userId","_id","FormData","fileName","Date","now","append","img","post","window","location","reload","URL","createObjectURL","Cancel","htmlFor","PermMedia","htmlColor","display","accept","onChange","target","files","Label","Room","EmojiEmotions","Comment","comment","commenter","setCommenter","useEffect","sender","getCommenter","format","createdAt","text","CommentPreview","populateComments","commentText","submitComment","postId","width","Post","likes","length","like","setLike","isLiked","setIsLiked","setUser","comments","setComments","currentUser","res","sort","p1","p2","fetchUser","likeHandler","put","err","MoreVert","c","Feed","posts","setPosts","fetchPosts","p","Online","Rightbar","friends","setFriends","targetUser","setTargetUser","followed","setFollowed","useLocation","searchResultUser","Object","keys","didCancel","friendList","getFriends","handleClick","HomeRightBar","ProfileRightBar","Remove","Add","city","from","relationship","friend","Home","loginCall","userCredential","Login","email","password","required","minLength","disabled","CircularProgress","color","size","Profile","useParams","coverPicture","Register","passwordAgain","setCustomValidity","Conversation","conversation","friendId","members","find","m","getUser","Message","message","own","populateUser","ChatOnline","onlineUsers","currentId","setCurrentChat","onlineFriends","setOnlineFriends","f","o","Messenger","conversations","setConversations","currentChat","messages","setMessages","newMessage","setNewMessage","arrivalMessage","setArrivalMessage","setOnlineUsers","socket","scrollRef","io","on","timeString","setTimeout","connected","senderId","prev","emit","users","getConversations","getMessages","handleSubmit","conversationId","receiverId","member","scrollIntoView","behavior","Result","result","computeProfileUrl","partsOfName","urlName","part","slice","Results","results","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.235aa9b2.chunk.js","sourcesContent":["const AuthReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case \"LOGIN_START\":\r\n            return {\r\n                user: null,\r\n                isFetching: true,\r\n                error: false\r\n            }\r\n        case \"LOGIN_SUCCESS\":\r\n            return {\r\n                user: action.payload,\r\n                isFetching: false,\r\n                error: false\r\n            }\r\n        case \"LOGIN_FAILURE\":\r\n            return {\r\n                user: null,\r\n                isFetching: false,\r\n                error: action.payload\r\n            }\r\n        case \"FOLLOW\":\r\n            return {\r\n                ...state,\r\n                user: {\r\n                    ...state.user,\r\n                    followings: [...state.user.followings, action.payload]\r\n                }\r\n            }\r\n        case \"UNFOLLOW\":\r\n            return {\r\n                ...state,\r\n                user: {\r\n                    ...state.user,\r\n                    followings: state.user.followings.filter(\r\n                        following => following !== action.payload\r\n                    )\r\n                }\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default AuthReducer","import { useReducer, createContext } from 'react'\r\nimport AuthReducer from './AuthReducer'\r\n\r\nconst INITIAL_STATE = {\r\n    user: null,\r\n    isFetching: false,\r\n    error: false\r\n}\r\n\r\n// const INITIAL_STATE = {\r\n//     user: {\r\n//         \"_id\": \"61255f908f1180332c2c23ec\",\r\n//         \"profilePic\": \"person/1.jpeg\",\r\n//         \"coverPicture\": \"\",\r\n//         \"followers\": [],\r\n//         \"isAdmin\": false,\r\n//         \"username\": \"jane\",\r\n//         \"email\": \"jane@gmail.com\",\r\n//         \"password\": \"$2b$10$6gP7EkLDBH2y4Dxl.phKHOVI6BVpiXH2DQZ14/AuTzY7IIkPNFHpC\",\r\n\r\n//         \"followings\": [1,2,3]\r\n//     },\r\n//     isFetching: false,\r\n//     error: false\r\n// }\r\n\r\n\r\nexport const AuthContext = createContext(INITIAL_STATE)\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE)\r\n    \r\n\r\n    return (\r\n        <AuthContext.Provider value={{\r\n            user: state.user,\r\n            isFetching: state.isFetching,\r\n            error: state.error,\r\n            dispatch\r\n        }} >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    )\r\n}","import axios from 'axios'\r\n\r\n\r\nconst getAxiosInstance = () => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n        console.log('it was dervelo')\r\n        return axios.create({\r\n            baseURL: 'http://localhost:8800/api/'\r\n        })\r\n    } else {\r\n        console.log('it was productoin')\r\n        return axios.create({\r\n            baseURL: \"https://dmatu-social-media.herokuapp.com/api/\"\r\n        })\r\n    }\r\n}\r\n\r\nconst axiosInstance = getAxiosInstance()\r\nconsole.log('hers axios instance')\r\nconsole.log(axiosInstance)\r\n\r\n\r\nexport { axiosInstance }","import './topbar.css'\r\nimport { Search, Person, Chat, Notifications } from \"@material-ui/icons\"\r\nimport { Link } from 'react-router-dom'\r\nimport { useContext, useRef } from 'react'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { axiosInstance } from '../../config'\r\nimport { useHistory } from 'react-router-dom'\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nexport default function Topbar() {\r\n    const { user } = useContext(AuthContext)\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const searchbarText = useRef()\r\n    const searchbarTextMobile = useRef()\r\n    let history = useHistory()\r\n\r\n    const search = async (e, mobile=false) => {\r\n        e.preventDefault()\r\n        let allUsers = await axiosInstance.get('/user/users')\r\n        let filteredUsers = []\r\n        let partsOfName\r\n        let searchbarTextValue = mobile ? searchbarTextMobile.current.value : searchbarText.current.value \r\n        allUsers.data.map((u) => {\r\n            partsOfName = u.username.split(' ')\r\n            partsOfName.some((name) => searchbarTextValue.includes(name)) && filteredUsers.push(u)\r\n        })\r\n        history.push({\r\n            pathname: '/search',\r\n            state: { filteredUsers }\r\n        })\r\n\r\n    }\r\n    return (\r\n        <>\r\n            <div className='topbarContainer'>\r\n                <div className=\"topbarLeft\">\r\n                    <Link to='/' style={{ textDecoration: 'none' }}>\r\n                        <span className=\"logo\">Lamasocial</span>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"topbarCenter\">\r\n                    <form className=\"searchBar\" onSubmit={(e) => search(e)}>\r\n                        <Search className='searchIcon' />\r\n                        <input ref={searchbarText} placeholder=\"Search for friends\" className=\"searchInput\" />\r\n                    </form>\r\n                </div>\r\n                <div className=\"topbarRight\">\r\n                    <div className=\"topbarIcons\">\r\n                        <div className=\"topbarIconItem\">\r\n                            <Person />\r\n                            <span className=\"topbarIconBadge\">1</span>\r\n                        </div>\r\n\r\n                        <div className=\"topbarIconItem\">\r\n                            <Link to='/messenger' className='topbarIconItemLink'>\r\n                                <Chat />\r\n                            </Link>\r\n                            <span className=\"topbarIconBadge\">2</span>\r\n                        </div>\r\n\r\n                        <div className=\"topbarIconItem\">\r\n                            <Notifications />\r\n                            <span className=\"topbarIconBadge\">1</span>\r\n                        </div>\r\n                    </div>\r\n                    <Link to={`/profile/${user.username}`}>\r\n                        <img\r\n                            src={\r\n                                user.profilePic\r\n                                    ? PF + user.profilePic\r\n                                    : PF + \"person/noAvatar.png\"\r\n                            }\r\n                            alt=\"\" className=\"topbarImg\"\r\n                        />\r\n                    </Link>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div className=\"searchBarMobileContainer\">\r\n                <form className=\"searchBar searchBarMobile\" onSubmit={(e) => search(e, true)}>\r\n                    <input\r\n                        ref={searchbarTextMobile}\r\n                        placeholder=\"Search for friends\"\r\n                        className=\"searchInput\"\r\n\r\n                    />\r\n\r\n                </form>\r\n                <div onClick={(e) => search(e, true)} className=\"searchIconContainerMobile\">\r\n                    <Search className='mobileSearchIcon' />\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </>\r\n    )\r\n}\r\n","export const Users = [\r\n    {\r\n      id:1,\r\n      profilePicture: \"person/1.jpeg\",\r\n      username: \"Safak Kocaoglu\",\r\n    },\r\n    {\r\n      id:2,\r\n      profilePicture: \"person/2.jpeg\",\r\n      username: \"Janell Shrum\",\r\n    },\r\n    {\r\n      id:3,\r\n      profilePicture: \"person/3.jpeg\",\r\n      username: \"Alex Durden\",\r\n    },\r\n    {\r\n      id:4,\r\n      profilePicture: \"person/4.jpeg\",\r\n      username: \"Dora Hawks\",\r\n    },\r\n    {\r\n      id:5,\r\n      profilePicture: \"person/5.jpeg\",\r\n      username: \"Thomas Holden\",\r\n    },\r\n    {\r\n      id:6,\r\n      profilePicture: \"person/6.jpeg\",\r\n      username: \"Shirley Beauchamp\",\r\n    },\r\n    {\r\n      id:7,\r\n      profilePicture: \"person/7.jpeg\",\r\n      username: \"Travis Bennett\",\r\n    },\r\n    {\r\n      id:8,\r\n      profilePicture: \"person/8.jpeg\",\r\n      username: \"Kristen Thomas\",\r\n    },\r\n    {\r\n      id:9,\r\n      profilePicture: \"person/9.jpeg\",\r\n      username: \"Gary Duty\",\r\n    },\r\n    {\r\n      id:10,\r\n      profilePicture: \"person/10.jpeg\",\r\n      username: \"Safak Kocaoglu\",\r\n    },\r\n  ];\r\n  \r\n  export const Posts = [\r\n    {\r\n      id: 1,\r\n      desc: \"Love For All, Hatred For None.\",\r\n      photo: \"post/1.jpeg\",\r\n      date: \"5 mins ago\",\r\n      userId: 1,\r\n      like: 32,\r\n      comment: 9,\r\n    },\r\n    {\r\n      id: 2,\r\n      photo: \"post/2.jpeg\",\r\n      date: \"15 mins ago\",\r\n      userId: 2,\r\n      like: 2,\r\n      comment: 1,\r\n    },\r\n    {\r\n      id: 3,\r\n      desc: \"Every moment is a fresh beginning.\",\r\n      photo: \"post/3.jpeg\",\r\n      date: \"1 hour ago\",\r\n      userId: 3,\r\n      like: 61,\r\n      comment: 2,\r\n    },\r\n    {\r\n      id: 4,\r\n      photo: \"post/4.jpeg\",\r\n      date: \"4 hours ago\",\r\n      userId: 4,\r\n      like: 7,\r\n      comment: 3,\r\n    },\r\n    {\r\n      id: 5,\r\n      photo: \"post/5.jpeg\",\r\n      date: \"5 hours ago\",\r\n      userId: 5,\r\n      like: 23,\r\n      comment: 5,\r\n    },\r\n    {\r\n      id: 6,\r\n      photo: \"post/6.jpeg\",\r\n      date: \"1 day ago\",\r\n      userId: 6,\r\n      like: 44,\r\n      comment: 6,\r\n    },\r\n    {\r\n      id: 7,\r\n      desc: \"Never regret anything that made you smile.\",\r\n      photo: \"post/7.jpeg\",\r\n      date: \"2 days ago\",\r\n      userId: 7,\r\n      like: 52,\r\n      comment: 3,\r\n    },\r\n    {\r\n      id: 8,\r\n      photo: \"post/8.jpeg\",\r\n      date: \"3 days ago\",\r\n      userId: 8,\r\n      like: 15,\r\n      comment: 1,\r\n    },\r\n    {\r\n      id: 9,\r\n      desc: \"Change the world by being yourself.\",\r\n      photo: \"post/9.jpeg\",\r\n      date: \"5 days ago\",\r\n      userId: 9,\r\n      like: 11,\r\n      comment: 2,\r\n    },\r\n    {\r\n      id: 10,\r\n      photo: \"post/10.jpeg\",\r\n      date: \"1 week ago\",\r\n      userId: 10,\r\n      like: 104,\r\n      comment: 12,\r\n    },\r\n  ];","import './closeFriend.css'\r\n\r\nexport default function CloseFriend({user}) {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    return (\r\n        <div>\r\n            <li className=\"sidebarFriend\">\r\n                <img className='sidebarFriendImg' src={PF + user.profilePicture} alt=\"\" />\r\n                <span className='sidebarFriendName'>{user.username}</span>\r\n            </li>\r\n        </div>\r\n    )\r\n}\r\n","import \"./sidebar.css\"\r\nimport { RssFeed, Chat, PlayCircleFilled, Group, Bookmark, HelpOutline, Work, Event } from '@material-ui/icons'\r\nimport { Users } from '../../dummyData'\r\nimport CloseFriend from \"../closeFriends/CloseFriend\"\r\n\r\nexport default function Sidebar() {\r\n    return (\r\n        <div className='sidebar'>\r\n            <div className='sidebarWrapper'>\r\n                <ul className=\"sidebarList\">\r\n                    <li className=\"sidebarListItem\">\r\n                        <PlayCircleFilled className='sidebarIcon' />\r\n                        <span className=\"sidebarListItemText\">\r\n                            Videos\r\n                        </span>\r\n                    </li>\r\n                    <li className=\"sidebarListItem\">\r\n                        <Group className='sidebarIcon' />\r\n                        <span className=\"sidebarListItemText\">\r\n                            Groups\r\n                        </span>\r\n                    </li>\r\n                    <li  className=\"sidebarListItem\">\r\n                        <Bookmark className='sidebarIcon' />\r\n                        <span className=\"sidebarListItemText\">\r\n                            Bookmarks\r\n                        </span>\r\n                    </li>\r\n                    <li className=\"sidebarListItem\">\r\n                        <HelpOutline className='sidebarIcon' />\r\n                        <span className=\"sidebarListItemText\">\r\n                            Questions\r\n                        </span>\r\n                    </li>\r\n                    <li className=\"sidebarListItem\">\r\n                        <Work className='sidebarIcon' />\r\n                        <span className=\"sidebarListItemText\">\r\n                            Jobs\r\n                        </span>\r\n                    </li>\r\n                    <li className=\"sidebarListItem\">\r\n                        <Event className='sidebarIcon' />\r\n                        <span className=\"sidebarListItemText\">\r\n                            Events\r\n                        </span>\r\n                    </li>\r\n                </ul>\r\n                <button className='sidebarButton'>Show More</button>\r\n                <hr className='sidebarHr' />\r\n                <ul className=\"sidebarFriendList\">\r\n                    {Users.map((u) => (\r\n                        <CloseFriend key={u.id} user={u}/>\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import './share.css'\r\nimport { PermMedia, Label, Room, EmojiEmotions, Cancel } from '@material-ui/icons'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { useContext, useRef, useState } from 'react'\r\nimport { axiosInstance } from '../../config'\r\n\r\nexport default function Share() {\r\n    const { user } = useContext(AuthContext)\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const desc = useRef()\r\n    const [file, setFile] = useState(null)\r\n\r\n    const submitHandler = async (e) => {\r\n        e.preventDefault()\r\n        const newPost = {\r\n            userId: user._id,\r\n            desc: desc.current.value\r\n        }\r\n        if (file) {\r\n            const data = new FormData()\r\n            const fileName = Date.now() + file.name\r\n            data.append(\"name\", fileName) // fileName\r\n            data.append(\"file\", file)\r\n\r\n            newPost.img = fileName\r\n            try {\r\n                await axiosInstance.post('/upload', data)\r\n            } catch (err) {\r\n                console.log(err)\r\n            }\r\n        }\r\n        try{\r\n            await axiosInstance.post('/posts', newPost)\r\n            window.location.reload()\r\n        } catch(err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='share'>\r\n            <div className=\"shareWrapper\">\r\n                <div className=\"shareTop\">\r\n                    <img className=\"shareProfileImg\" src={user.profilePic ? PF + user.profilePic : PF + \"person/noAvatar.png\"} alt=\"\" />\r\n                    <input\r\n                        placeholder={\"Whats on your mind \" + user.username + \"?\"}\r\n                        className='shareInput'\r\n                        ref={desc}\r\n                    />\r\n                </div>\r\n                <hr className='shareHr' />\r\n                { file && (\r\n                    <div className=\"shareImgContainer\">\r\n                        <img className=\"shareImg\" src={URL.createObjectURL(file)} alt=\"\" />\r\n                        <Cancel className=\"shareCancelImg\" onClick={()=>setFile(null)}/>\r\n                    </div>\r\n                )}\r\n                <form className=\"shareBottom\" onSubmit={submitHandler}>\r\n                    <div className=\"shareOptions\">\r\n                        <label htmlFor=\"file\" className=\"shareOption\">\r\n                            <PermMedia htmlColor=\"tomato\" className='shareIcon' />\r\n                            <span className='shareOptionText'>Photo or Video</span>\r\n                            <input style={{display:'none'}} type=\"file\" id=\"file\" accept=\".png,.jpeg,.jpg\" onChange={(e) => setFile(e.target.files[0])} />\r\n                        </label>\r\n                        <div className=\"shareOption\">\r\n                            <Label htmlColor=\"blue\" className='shareIcon' />\r\n                            <span className='shareOptionText'>Tag</span>\r\n                        </div>\r\n                        <div className=\"shareOption\">\r\n                            <Room htmlColor=\"green\" className='shareIcon' />\r\n                            <span className='shareOptionText'>Location</span>\r\n                        </div>\r\n                        <div className=\"shareOption\">\r\n                            <EmojiEmotions htmlColor=\"goldenrod\" className='shareIcon' />\r\n                            <span className='shareOptionText'>Feelings</span>\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"shareButton\" type=\"submit\">Share</button>\r\n                </form>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import './comment.css'\r\nimport { format } from 'timeago.js'\r\nimport { axiosInstance } from '../../config'\r\nimport { useState, useEffect } from 'react'\r\n\r\nexport default function Comment({ comment }) {\r\n\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const [commenter, setCommenter] = useState()\r\n    useEffect(() => {\r\n        const getCommenter = async () => {\r\n\r\n            const commenter = await axiosInstance.get('/user?userId=' + comment.sender)\r\n            console.log('heres the commenter')\r\n            console.log(commenter.data)\r\n            console.log('heres the comment sender')\r\n            setCommenter(commenter.data)\r\n        }\r\n        getCommenter()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        console.log('heres commenter')\r\n        console.log(commenter?.username)\r\n    }, [commenter])\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className='comment'>\r\n            <div className=\"commentTop\">\r\n                <img\r\n                    src={commenter?.profilePic\r\n                        ? PF + commenter?.profilePic\r\n                        : PF + 'person/noAvatar.png'\r\n\r\n                    }\r\n                    className=\"commentProfilePic\"\r\n                >\r\n                </img>\r\n\r\n\r\n                <div className=\"commentTimeAgo\">{commenter?.username} &nbsp; - &nbsp; {format(comment.createdAt)}</div>\r\n            </div>\r\n            <div className=\"commentBody\">\r\n                {comment.text}\r\n\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n","import './commentPreview.css'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { axiosInstance } from '../../config'\r\nimport { useContext, useRef } from 'react'\r\n\r\nexport default function CommentPreview({post, populateComments}) {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const { user } = useContext(AuthContext)\r\n    const commentText = useRef()\r\n\r\n    const submitComment = async(e) => {\r\n        e.preventDefault()\r\n        const comment = {\r\n            postId: post._id,\r\n            sender: user._id,\r\n            text: commentText.current.value\r\n        }\r\n        await axiosInstance.post('/comments/' + post._id, comment)\r\n        commentText.current.value = ''\r\n        populateComments()\r\n    }\r\n\r\n    return (\r\n        <div className='commentPreview'>\r\n            <img\r\n                src={user.profilePic\r\n                    ? PF + user.profilePic\r\n                    : PF + 'person/noAvatar.png'\r\n\r\n                }\r\n                className=\"commentPreviewProfilePic\"\r\n            >\r\n            </img>\r\n\r\n            <form style={{width: '90%'}} onSubmit = {(e) => {submitComment(e)}}>\r\n                <input ref={commentText} type=\"text\" placeholder=\"What do you think?\" className=\"commentPreviewInput\" />\r\n            </form>\r\n\r\n        </div>\r\n    )\r\n}\r\n","import \"./post.css\"\r\nimport { MoreVert } from '@material-ui/icons'\r\nimport { useState, useEffect } from 'react'\r\nimport { axiosInstance } from '../../config'\r\nimport { format } from 'timeago.js'\r\nimport { useContext } from 'react'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport Comment from '../comment/Comment'\r\nimport CommentPreview from \"../commentPreview/CommentPreview\"\r\n\r\nexport default function Post({ post }) {\r\n    const [like, setLike] = useState(post.likes.length)\r\n    const [isLiked, setIsLiked] = useState(false)\r\n    const [user, setUser] = useState({})\r\n    const [comments, setComments] = useState([])\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const { user: currentUser } = useContext(AuthContext)\r\n\r\n    const populateComments = async () => {\r\n        const res = await axiosInstance.get(`/comments/${post._id}`)\r\n        setComments(res.data.sort((p1, p2) => {\r\n            return new Date(p2.createdAt) - new Date(p1.createdAt)\r\n        }))    \r\n    }\r\n\r\n    useEffect(() => {\r\n        populateComments()\r\n        console.log('just populated them')\r\n\r\n        // <Comment sender=\"jane\" text=\"heres janes test comment\"/>\r\n\r\n    }, [post])\r\n\r\n    useEffect(() => {\r\n        setIsLiked(post.likes.includes(currentUser._id))\r\n    }, [currentUser._id, post.likes])\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const res = await axiosInstance.get(`/user?userId=${post.userId}`)\r\n            setUser(res.data)\r\n        }\r\n        fetchUser()\r\n    }, [post.userId])\r\n\r\n    const likeHandler = () => {\r\n        try {\r\n            axiosInstance.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id })\r\n        } catch (err) {\r\n\r\n        }\r\n        setLike(isLiked ? like - 1 : like + 1)\r\n        setIsLiked(!isLiked)\r\n    }\r\n    return (\r\n        <div className='post'>\r\n            <div className=\"postWrapper\">\r\n                <div className=\"postTop\">\r\n                    <div className=\"postTopLeft\">\r\n                        <img className='postProfileImg'\r\n                            src={user.profilePic\r\n                                ? PF + user.profilePic\r\n                                : PF + \"person/noAvatar.png\"\r\n                            }\r\n                            alt=\"\"\r\n                        />\r\n                        <span className=\"postUsername\">\r\n                            {user.username}\r\n                        </span>\r\n                        <span className=\"postDate\">{format(post.createdAt)}</span>\r\n                    </div>\r\n                    <div className=\"postTopRight\">\r\n                        <MoreVert />\r\n                    </div>\r\n                </div>\r\n                <div className=\"postCenter\">\r\n                    <span className=\"postText\">{post?.desc}</span>\r\n                    <img className='postImg' src={PF + post.img} alt=\"\" />\r\n                </div>\r\n                <div className=\"postBottom\">\r\n                    <div className=\"postBottomLeft\">\r\n                        <img className='likeButton' src={`${PF}like.png`} onClick={likeHandler} alt=\"\" />\r\n                        <img className='likeButton' src={`${PF}heart.png`} onClick={likeHandler} alt=\"\" />\r\n                        <span className=\"postLikeCounter\">{like} people like it</span>\r\n                    </div>\r\n                    <div className=\"postBottomRight\">\r\n                        <span className=\"postCommentText\">\r\n                            {comments.length} comments\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"postComments\">\r\n                    {\r\n                        comments.map((c) => (\r\n                            <Comment key={c._id} comment={c} />\r\n                        ))\r\n                    }\r\n                </div>\r\n                <CommentPreview post={post} populateComments={populateComments} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import Share from '../share/Share'\r\nimport Post from '../post/Post'\r\nimport \"./feed.css\"\r\nimport { useState, useEffect, useContext } from 'react'\r\nimport { axiosInstance } from '../../config'\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function Feed({ username }) {\r\n    const [posts, setPosts] = useState([])\r\n    const { user } = useContext(AuthContext)\r\n\r\n    useEffect(() => {\r\n        const fetchPosts = async () => {\r\n            const res = username\r\n                ? await axiosInstance.get(\"/posts/profile/\" + username)\r\n                : await axiosInstance.get(\"/posts/timeline/\" + user._id)\r\n            setPosts(res.data.sort((p1, p2) => {\r\n                return new Date(p2.createdAt) - new Date(p1.createdAt)\r\n            }))\r\n        }\r\n        fetchPosts()\r\n    }, [username, user._id])\r\n    return (\r\n        <div className='feed'>\r\n            <div className=\"feedWrapper\">\r\n                {(!username || username === user.username) && <Share />}\r\n                {posts.map(p => (\r\n                    <Post key={p._id} post={p} />\r\n                ))}\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import './online.css'\r\n\r\nexport default function Online({user}) {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    return (\r\n        <li className=\"rightbarFriend\">\r\n            <div className=\"rightbarProfileImgContainer\">\r\n                <img className='rightbarProfileImg' \r\n                    src={PF + user.profilePicture}\r\n                    alt=\"\" />\r\n                <span className='rightbarOnline'></span>\r\n            </div>\r\n            <span className=\"rightbarUserName\">{user.username}</span>\r\n        </li>\r\n    )\r\n}\r\n","import \"./rightbar.css\"\r\nimport { Users } from '../../dummyData'\r\nimport Online from \"../online/Online\"\r\nimport { useState, useEffect, useContext } from 'react'\r\nimport { axiosInstance } from '../../config'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { Add, Remove } from '@material-ui/icons'\r\n\r\nexport default function Rightbar({ user }) {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const [friends, setFriends] = useState([])\r\n    const { user: currentUser, dispatch } = useContext(AuthContext)\r\n    const [targetUser, setTargetUser] = useState(user)\r\n    const [followed, setFollowed] = useState(currentUser.followings.includes(targetUser?._id))\r\n    const location = useLocation()\r\n    const searchResultUser = location?.state\r\n\r\n    // if we got here from the results page, set the user state\r\n    useEffect(() => {\r\n        if (searchResultUser && Object.keys(searchResultUser).length !== 0) {\r\n            setTargetUser(searchResultUser)\r\n        }\r\n    }, [currentUser])\r\n\r\n    useEffect(() => {\r\n        setFollowed(currentUser.followings.includes(targetUser?._id))\r\n    }, [currentUser, targetUser])\r\n\r\n    useEffect(() => {\r\n        let didCancel = false\r\n\r\n        const getFriends = async () => {\r\n            try {\r\n                let friendList\r\n                if (targetUser && Object.keys(targetUser).length !== 0) {\r\n                    friendList = await axiosInstance.get('/user/friends/' + targetUser._id)\r\n                } else { \r\n                    friendList = await axiosInstance.get('/user/friends/' + currentUser._id)\r\n                }\r\n                if (!didCancel) {\r\n                    setFriends(friendList.data)\r\n                }\r\n            } catch (err) {\r\n                console.log(err)\r\n            }\r\n        }\r\n\r\n        getFriends()\r\n\r\n        return () => {\r\n            didCancel=true\r\n        }\r\n\r\n    }, [currentUser, targetUser])\r\n\r\n    const handleClick = async () => {\r\n        try {\r\n            if (followed){\r\n                await axiosInstance.put('/user/' + targetUser._id + \"/unfollow\", {\r\n                    userId: currentUser._id\r\n                })\r\n                dispatch({type: \"UNFOLLOW\", payload:targetUser._id})\r\n            } else {\r\n                await axiosInstance.put('/user/' + targetUser._id + \"/follow\", {\r\n                    userId: currentUser._id\r\n                })\r\n                dispatch({type: \"FOLLOW\", payload:targetUser._id})\r\n            }\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n        setFollowed(!followed)\r\n    }\r\n\r\n    const HomeRightBar = () => {\r\n        return (\r\n            <>\r\n                <div className=\"birthdayContainer\">\r\n                    <img className='birthdayImg' src=\"assets/gift.png\" alt=\"\" />\r\n                    <span className=\"birthdayText\"> <b>Pola Foster</b> and <b>3 other friends</b> have a birthday today</span>\r\n                </div>\r\n\r\n                <img className='rightbarAd' src=\"assets/ad.png\" alt=\"\" />\r\n                <h4 className=\"rightbarTitle\">Online Friends</h4>\r\n                <ul className=\"rightbarFriendList\">\r\n\r\n                    {Users.map(u => (\r\n                        <Online key={u.id} user={u} />\r\n                    ))}\r\n                </ul>\r\n            </>\r\n        )\r\n    }\r\n\r\n    const ProfileRightBar = () => {\r\n        return (\r\n            <>\r\n                {user.username !== currentUser.username && (\r\n                    <button className=\"rightbarFollowButton\" onClick={handleClick}>\r\n                        {followed ? \"Unfollow\" : \"Follow\"}\r\n                        {followed ? <Remove /> : <Add /> }\r\n                    </button>\r\n                )}\r\n                <h4 className='rightbarTitle'>User Information </h4>\r\n                <div className=\"rightbarInfo\">\r\n                    <div className=\"rightbarInfoItem\">\r\n                        <span className=\"rightbarInfoKey\">City:</span>\r\n                        <span className=\"rightbarInfoValue\">{user.city}</span>\r\n                    </div>\r\n                    <div className=\"rightbarInfoItem\">\r\n                        <span className=\"rightbarInfoKey\">From:</span>\r\n                        <span className=\"rightbarInfoValue\">{user.from}</span>\r\n                    </div>\r\n                    <div className=\"rightbarInfoItem\">\r\n                        <span className=\"rightbarInfoKey\">Relationship:</span>\r\n                        <span className=\"rightbarInfoValue\">\r\n                            {user.relationship === 1\r\n                                ? \"Single\"\r\n                                : user.relationship === 2\r\n                                    ? \"Married\"\r\n                                    : '-'}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <h4 className='rightbarTitle'>User friends</h4>\r\n                <div className='rightbarFollowings'>\r\n                    {friends.map((friend) => (\r\n                        <Link \r\n                            key={friend._id} \r\n                            to={\"/profile/\" + friend.username} \r\n                            style={{textDecoration:\"none\"}}\r\n                            onClick={() => setTargetUser(friend)}\r\n                            >\r\n                            <div className='rightbarFollowing'>\r\n                                <img\r\n                                    src={friend.profilePicture\r\n                                        ? PF + friend.profilePicture\r\n                                        : PF + \"person/noAvatar.png\"\r\n                                    }\r\n                                    alt=\"\"\r\n                                    className=\"rightbarFollowingImg\" />\r\n                                <span className=\"rightbarFollowingName\">{friend.username}</span>\r\n                            </div>\r\n                        </Link>\r\n                    ))}\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n    return (\r\n        <div className='rightbar'>\r\n            <div className=\"rightbarWrapper\">\r\n                {user ? <ProfileRightBar /> : <HomeRightBar />}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import Topbar from \"../../components/topbar/Topbar\"\r\nimport Sidebar from \"../../components/sidebar/Sidebar\"\r\nimport Feed from \"../../components/feed/Feed\"\r\nimport Rightbar from \"../../components/rightbar/Rightbar\"\r\nimport \"./home.css\"\r\n\r\nexport default function Home() {\r\n    return (\r\n        <>\r\n    \r\n            <Topbar />\r\n            <div className=\"homeContainer\">\r\n                <Sidebar />\r\n                <Feed />\r\n                <Rightbar />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import { axiosInstance } from './config'\r\n\r\nexport const loginCall = async (userCredential, dispatch) => {\r\n    dispatch({ type: \"LOGIN_START\" })\r\n    try {\r\n        const res = await axiosInstance.post('/auth/login', userCredential)\r\n        console.log('user credential')\r\n        console.log(userCredential)\r\n        console.log('the res from apicall')\r\n        console.log(res)\r\n        dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data })\r\n    } catch (err) {\r\n        dispatch({ type: \"LOGIN_FAILURE\", payload: err })\r\n    }\r\n}","import './login.css'\r\nimport { useRef, useContext } from 'react'\r\nimport { loginCall } from '../../apiCalls'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { CircularProgress } from '@material-ui/core'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Login() {\r\n    const email = useRef()\r\n    const password = useRef()\r\n    const { user, isFetching, error, dispatch } = useContext(AuthContext)\r\n    const handleClick = (e) => {\r\n        e.preventDefault()\r\n        loginCall({ email: email.current.value, password: password.current.value }, dispatch)\r\n    }\r\n\r\n    return (\r\n        <div className='login'>\r\n            <div className=\"loginWrapper\">\r\n                <div className=\"loginLeft\">\r\n                    <h3 className=\"loginLogo\">Lamasocial</h3>\r\n                    <span className=\"loginDesc\">Connect with friends and the world around you on Lamasocial</span>\r\n                </div>\r\n                <div className=\"loginRight\">\r\n                    <form className=\"loginBox\" onSubmit={handleClick}>\r\n                        <input placeholder=\"Email\" type='email' className='loginInput' ref={email} />\r\n                        <input required placeholder=\"Password\" type='password' minLength=\"6\" className='loginInput' ref={password} />\r\n                        <button className=\"loginButton\" disabled={isFetching}>\r\n                            {isFetching ? <CircularProgress color='white' size=\"20px\" /> : \"Log in\"}\r\n                        </button>\r\n                        <span className='loginForgot'>Forgot password?</span>\r\n                        <Link to='/register' className='linkToLogin'>\r\n                            <button className=\"loginRegisterButton\" disabled={isFetching}>\r\n                                {isFetching ? <CircularProgress color={'white'} size=\"20px\" /> : \"Create a New Account\"}\r\n                            </button>\r\n                        </Link>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import './profile.css'\r\nimport Topbar from \"../../components/topbar/Topbar\"\r\nimport Sidebar from \"../../components/sidebar/Sidebar\"\r\nimport Feed from \"../../components/feed/Feed\"\r\nimport Rightbar from \"../../components/rightbar/Rightbar\"\r\nimport { useEffect, useState } from 'react'\r\nimport { axiosInstance } from '../../config'\r\nimport { useParams } from 'react-router'\r\n\r\nexport default function Profile() {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const [user, setUser] = useState({})\r\n    const username = useParams().username\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const res = await axiosInstance.get(`/user?username=${username}`)\r\n            setUser(res.data)\r\n        }\r\n        fetchUser()\r\n    }, [username])\r\n\r\n    return (\r\n        <div>\r\n            <>\r\n                <Topbar />\r\n                <div className=\"profile\">\r\n                    <Sidebar />\r\n                    <div className=\"profileRight\">\r\n                        <div className=\"profileRightTop\">\r\n                            <div className=\"profileCover\">\r\n                                <img className=\"profileCoverImg\" \r\n                                    src={\r\n                                        user.coverPicture ? \r\n                                            PF + user.coverPicture : \r\n                                            PF + \"/person/noCover.png\"\r\n                                    } \r\n                                    alt=\"\" \r\n                                />\r\n                                <img className=\"profileUserImg\" \r\n                                    src={user.profilePic \r\n                                        ? PF + user.profilePic\r\n                                        : PF + '/person/noAvatar.png'\r\n                                    } \r\n                                    alt=\"\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"profileInfo\">\r\n                                <h4 className='profileInfoName'>{user.username}</h4>\r\n                                <span className='profileInfoDesc'>{user.desc}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"profileRightBottom\">\r\n                            <Feed username={username}/>\r\n                            <Rightbar user={user} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        </div>\r\n    )\r\n}\r\n","import { useRef, useEffect, useContext } from 'react'\r\nimport './register.css'\r\nimport { axiosInstance } from '../../config'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Link } from 'react-router-dom'\r\nimport { loginCall } from '../../apiCalls'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { dispatch } from '../../context/AuthContext'\r\n\r\nexport default function Register() {\r\n    const username = useRef()\r\n    const email = useRef()\r\n    const password = useRef()\r\n    const passwordAgain = useRef()\r\n    const history = useHistory()\r\n    const { dispatch } = useContext(AuthContext)\r\n\r\n    const handleClick = async (e) => {\r\n        e.preventDefault()\r\n        if (passwordAgain.current.value !== password.current.value) {\r\n            passwordAgain.current.setCustomValidity(\"Passwords don't match!\")\r\n        } else {\r\n            const user = {\r\n                username: username.current.value,\r\n                email: email.current.value,\r\n                password: password.current.value,\r\n            }\r\n            try {\r\n                await axiosInstance.post('/auth/register', user)\r\n                loginCall({email:email.current.value, password:password.current.value}, dispatch)\r\n\r\n                history.push(\"/login\")\r\n            } catch (err) {\r\n                // finish notes - add unique validation\r\n                console.log(err)\r\n            }\r\n        }\r\n    }\r\n    return (\r\n        <div className='login'>\r\n            <div className=\"loginWrapper\">\r\n                <div className=\"loginLeft\">\r\n                    <h3 className=\"loginLogo\">Lamasocial</h3>\r\n                    <span className=\"loginDesc\">Connect with friends and the world around you on Lamasocial</span>\r\n                </div>\r\n                <div className=\"loginRight\">\r\n                    <form className=\"loginBox\" onSubmit={handleClick}>\r\n                        <input placeholder=\"Username\" required ref={username} className='loginInput' />\r\n                        <input placeholder=\"Email\" type=\"email\" required ref={email} className='loginInput' />\r\n                        <input placeholder=\"Password\" type=\"password\" required minLength=\"6\" ref={password} className='loginInput' />\r\n                        <input placeholder=\"Password Again\" type=\"password\" required ref={passwordAgain} className='loginInput' />\r\n                        <button className=\"loginButton\">Sign Up</button>\r\n                        <Link to=\"/login\" className='loginRegisterLink'>\r\n                            <button type=\"submit\" className=\"loginRegisterButton\">\r\n                                Log into Account\r\n                            </button>\r\n                        </Link>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import \"./conversation.css\"\r\nimport { useEffect, useState } from 'react'\r\nimport { axiosInstance } from '../../config'\r\n\r\nexport default function Conversation({ conversation, currentUser }) {\r\n    const [user, setUser] = useState({})\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n\r\n    useEffect(() => {\r\n        const friendId = conversation.members.find((m) => m !== currentUser._id)\r\n\r\n        const getUser = async () => {\r\n            try {\r\n                const res = await axiosInstance('/user?userId=' + friendId)\r\n                setUser(res.data)\r\n            } catch (err) {\r\n                console.log(err)\r\n            }\r\n        }\r\n        getUser()\r\n\r\n    }, [currentUser, conversation])\r\n\r\n\r\n\r\n    return (\r\n        <div className='conversation'>\r\n            <img className='conversationImg'\r\n                src={ user.profilePic ? PF + user.profilePic : PF + \"person/noAvatar.png\"}\r\n                alt=\"\"\r\n            />\r\n            <span className=\"conversationName\">{user.username}</span>\r\n        </div>\r\n    )\r\n}\r\n","import './message.css'\r\nimport { format } from 'timeago.js'\r\nimport { axiosInstance } from '../../config'\r\nimport { useState, useEffect } from 'react'\r\n\r\nexport default function Message({ message, own }) {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    console.log('heres message')\r\n    console.log(message)\r\n\r\n    const [user, setUser] = useState()\r\n\r\n    const populateUser = async () => {\r\n        const user = await axiosInstance.get('/user?userId=' + message.sender)\r\n        setUser(user)\r\n    }\r\n\r\n    useEffect(() => {\r\n        populateUser()\r\n    }, [])\r\n\r\n    return (\r\n        <div className={own ? \"message own\" : \"message\"}>\r\n            <div className=\"messageTop\">\r\n                <img\r\n                    className='messageImg'\r\n                    src={\r\n                        user?.data.profilePic \r\n                            ? PF + user?.data.profilePic \r\n                            : PF + 'person/noAvatar.png'\r\n                            \r\n                    }\r\n                    alt=\"\"\r\n                />\r\n                <p className='messageText'>{message.text}</p>\r\n            </div>\r\n            <div className=\"messageBottom\">{format(message.createdAt)}</div>\r\n        </div>\r\n    )\r\n}\r\n","import \"./chatOnline.css\"\r\nimport { axiosInstance } from '../../config'\r\nimport { useState, useEffect } from 'react'\r\n\r\nexport default function ChatOnline({ onlineUsers, currentId, setCurrentChat }) {\r\n    const [friends, setFriends] = useState([])\r\n    const [onlineFriends, setOnlineFriends] = useState([])\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n\r\n    useEffect(() => {\r\n        const getFriends = async () => {\r\n            const res = await axiosInstance.get('/user/friends/' + currentId)\r\n            setFriends(res.data)\r\n        }\r\n\r\n        getFriends()\r\n    }, [currentId])\r\n\r\n    useEffect(() => {\r\n        console.log('heres friends')\r\n        console.log(friends)\r\n        setOnlineFriends(friends.filter(f => onlineUsers.includes(f._id)))\r\n    }, [friends, onlineUsers])\r\n\r\n    const handleClick = async (user) => {\r\n        try {\r\n            console.log('current id')\r\n            console.log(currentId)\r\n            console.log('friend id')\r\n            console.log(user._id)\r\n            const res = await axiosInstance.get(`/conversations/find/${currentId}/${user._id}`)\r\n            setCurrentChat(res.data)\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='chatOnline'>\r\n            {onlineFriends.map((o) => (\r\n\r\n                <div className=\"chatOnlineFriend\" onClick={() => handleClick(o)}>\r\n                    <div className=\"chatOnlineImgContainer\">\r\n                        <img\r\n                            className='chatOnlineImg'\r\n                            src={o?.profilePic\r\n                                ? PF + o.profilePic\r\n                                : PF + \"person/noAvatar.png\"}\r\n                            alt=\"\" />\r\n                        <div className=\"chatOnlineBadge\"></div>\r\n                    </div>\r\n                    <div className=\"chatOnlineName\">{o.username}</div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n","import './messenger.css'\r\nimport Topbar from '../../components/topbar/Topbar'\r\nimport Conversation from '../../components/conversations/Conversation'\r\nimport Message from '../../components/message/Message'\r\nimport ChatOnline from '../../components/chatOnline/ChatOnline'\r\nimport { useContext, useEffect, useState, useRef } from 'react'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { axiosInstance } from '../../config'\r\nimport { io } from 'socket.io-client'\r\n\r\nexport default function Messenger() {\r\n    const [ conversations, setConversations ] = useState([])\r\n    const [ currentChat, setCurrentChat ] = useState(null)\r\n    const [ messages, setMessages ] = useState([])\r\n    const [ newMessage, setNewMessage ] = useState(\"\")\r\n    const [ arrivalMessage, setArrivalMessage ] = useState(null)\r\n    const [ onlineUsers, setOnlineUsers ] = useState([])\r\n    const socket = useRef()\r\n    const { user } = useContext(AuthContext)\r\n    const scrollRef = useRef()\r\n\r\n    useEffect(() => {\r\n\r\n        if (process.env.NODE_ENV === 'production') {\r\n            //next try <socket.current = io()>\r\n            // socket.current = io('wss://dmatu-social-media.herokuapp.com/socket.io/?EIO=4&transport=websocket')\r\n            socket.current = io('wss://dmatu-social-media.herokuapp.com')\r\n\r\n        } else { \r\n            socket.current = io('ws://localhost:8800')\r\n        }\r\n\r\n        socket.current.on('connect', () => {\r\n            console.log('connected')\r\n        })\r\n\r\n\r\n        socket.current.on('time', function(timeString) {\r\n            console.log('lmaoz timestringgg from messgng')\r\n            console.log(timeString)\r\n        });\r\n\r\n        const outputSlowly = () => {\r\n            console.log('heres socket current')\r\n            console.log(socket.current.connected)\r\n        }\r\n        setTimeout(outputSlowly, 5000)\r\n        socket.current.on(\"getMessage\", (data) => {\r\n            setArrivalMessage({\r\n                sender: data.senderId, \r\n                text: data.text,\r\n                createdAt: Date.now()\r\n            })\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        arrivalMessage && \r\n        currentChat?.members.includes(arrivalMessage.sender) &&\r\n        setMessages((prev)=>[...prev, arrivalMessage])\r\n    }, [arrivalMessage, currentChat])\r\n\r\n    useEffect(() => {\r\n        socket.current.emit('addUser', user._id)\r\n        socket.current.on('getUsers', (users) => {\r\n            setOnlineUsers(user.followings.filter(f=>users.some(u=>u.userId === f)))\r\n        })\r\n    }, [user])\r\n\r\n    useEffect(() => {\r\n        const getConversations = async () => {\r\n            try{\r\n                const res = await axiosInstance.get('/conversations/' + user._id)\r\n                setConversations(res.data)\r\n            } catch (err) {\r\n                console.log(err)\r\n            }\r\n        }\r\n        getConversations()\r\n    }, [user._id])\r\n\r\n    useEffect(() => {\r\n        const getMessages = async () => {\r\n            try{\r\n                const res = await axiosInstance.get('/messages/' + currentChat?._id)\r\n                setMessages(res.data)\r\n                // setNewMessage(\"\")\r\n            } catch(err){ \r\n                console.log(err)\r\n            }\r\n        }\r\n        getMessages()\r\n    }, [currentChat])\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        const message = {\r\n            sender: user._id,\r\n            text: newMessage, \r\n            conversationId: currentChat._id\r\n        }\r\n\r\n        const receiverId = currentChat.members.find(member=> member !== user._id)\r\n\r\n        socket.current.emit('sendMessage', {\r\n            senderId: user._id,\r\n            receiverId,\r\n            text: newMessage\r\n        })\r\n\r\n        try{\r\n            const res = await axiosInstance.post('/messages', message)\r\n            setMessages([...messages, res.data])\r\n            setNewMessage(\"\")\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        scrollRef.current?.scrollIntoView({behavior: \"smooth\"})\r\n    }, [messages])\r\n\r\n    return (\r\n        <>\r\n            <Topbar />\r\n            <div className='messenger'>\r\n                <div className=\"chatMenu\">\r\n                    <div className=\"chatMenuWrapper\">\r\n                        <input placeholder=\"Search for friends\"  className=\"chatMenuInput\"/>\r\n                        {conversations.map((c) => {\r\n                            return (\r\n                                <div key={c._id} onClick={()=>setCurrentChat(c)}>\r\n                                    <Conversation key={c._id} conversation={c} currentUser={user} />\r\n                                </div>\r\n                            )\r\n                        })}  \r\n\r\n                    </div>\r\n                </div>\r\n                <div className=\"chatBox\">\r\n                    <div className=\"chatBoxWrapper\">\r\n                        {\r\n                            currentChat ? \r\n                        <>\r\n                            <div className=\"chatBoxTop\">\r\n                                {\r\n                                    messages.map(m=>(\r\n                                        <div key={m._id} ref={scrollRef}>\r\n                                            <Message key={m._id} message={m} own={m.sender === user._id} />\r\n                                        </div>\r\n                                    ))\r\n                                }\r\n                            </div>\r\n                            <div className=\"chatBoxBottom\">\r\n                                <textarea className='chatMessageInput' \r\n                                          placeholder=\"write something...\"\r\n                                          onChange={(e)=>setNewMessage(e.target.value)}\r\n                                          value={newMessage}\r\n                                          >\r\n                                </textarea>\r\n                                <button className='chatSubmitButton' onClick={handleSubmit}>Send</button>\r\n                            </div>\r\n                        </>\r\n                        : <span className='noConversationText'>Open a conversation to start a chat.</span>}\r\n                    </div>\r\n                </div>\r\n                <div className=\"chatOnline\">\r\n                    <div className=\"chatOnlineWrapper\">\r\n                        <ChatOnline onlineUsers={onlineUsers} currentId={user._id} setCurrentChat={setCurrentChat}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import './result.css'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nexport default function Result({ name, profilePic, result }) {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const history = useHistory()\r\n\r\n    const computeProfileUrl = () => {\r\n        const prefix = '/profile/'\r\n        const partsOfName = name.split(' ')\r\n        let urlName = ''\r\n        partsOfName.map((part) => {\r\n            urlName += part + \"%20\"\r\n        })\r\n        const combinedUrl = prefix + urlName\r\n        let finalUrl = combinedUrl.slice(0, -3)\r\n        return finalUrl\r\n    }\r\n\r\n    return (\r\n\r\n        <div className='resultContainer' onClick={() =>\r\n            history.push({\r\n                pathname: computeProfileUrl(),\r\n                state: result\r\n            })\r\n        }>\r\n            <img\r\n                src={\r\n                    profilePic\r\n                        ? PF + profilePic\r\n                        : PF + \"person/noAvatar.png\"\r\n\r\n                }\r\n                className=\"resultImg\"\r\n            ></img>\r\n            <div className=\"resultName\">\r\n                {name}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import './results.css'\r\nimport Result from '../result/Result'\r\n\r\nexport default function Results({ results }) {\r\n\r\n    return (\r\n        <div className='results'>\r\n            <div className='resultsWrapper'>\r\n                { Object.keys(results).length === 0 && <div> Sorry, we couldn't find anyone with that username</div>}\r\n                {results.map((result) => {\r\n                    return (\r\n                        <>\r\n                        <Result name={result.username} profilePic={result.profilePic} result={result}  />\r\n                        </>\r\n\r\n                    )\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import Rightbar from '../../components/rightbar/Rightbar'\r\nimport Sidebar from '../../components/sidebar/Sidebar'\r\nimport Topbar from '../../components/topbar/Topbar'\r\nimport Results from '../../components/results/Results'\r\nimport './search.css'\r\nimport { useLocation } from 'react-router-dom'\r\nimport '../home/home.css'\r\n\r\nexport default function Search() {\r\n    const location = useLocation()\r\n    const users = location.state.filteredUsers\r\n\r\n    return (\r\n        <>\r\n            <Topbar/>\r\n            <div className='searchContainer'>\r\n                <Sidebar />\r\n                <Results results={users} />\r\n                <Rightbar />\r\n            </div>\r\n\r\n        </>\r\n    )\r\n}\r\n","import Home from \"./pages/home/Home\";\nimport Login from './pages/login/Login';\nimport Profile from './pages/profile/Profile';\nimport Register from './pages/register/Register';\nimport { \n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from 'react-router-dom'\nimport { useContext } from \"react\";\nimport { AuthContext } from \"./context/AuthContext\";\nimport Messenger from \"./pages/messenger/Messenger\";\nimport Search from \"./pages/search/Search\";\n\nfunction App() {\n\n  const {user} = useContext(AuthContext)\n  return (\n    <Router>\n        <Switch>\n          <Route exact path=\"/\">\n            {user ? <Home /> : <Register />}\n          </Route>\n          <Route path=\"/login\">\n            {user ? <Redirect to='/'/> : <Login />}\n          </Route>\n          <Route path=\"/register\">\n            {user ? <Redirect to='/'/> : <Register />}\n          </Route>\n          <Route path=\"/messenger\">\n            {!user ? <Redirect to='/'/> : <Messenger />}\n          </Route>\n          <Route path=\"/profile/:username\">\n            {!user ? <Redirect to=\"/\" /> : <Profile />}\n          </Route>\n          <Route path=\"/search\">\n            {!user ? <Redirect to=\"/\" /> : <Search />}\n          </Route>\n        </Switch>\n    </Router>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { AuthContextProvider } from './context/AuthContext'\n\nReactDOM.render(\n  <React.StrictMode>\n      {/* <p>just something really simple - shoudlnt cause any problems!</p> */}\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}